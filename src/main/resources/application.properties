# ====================================
# RENDER-OPTIMIZED CONFIGURATION
# ====================================

# Server Port (Render sets this automatically)
server.port=${PORT:8080}

# ====================================
# TOMCAT TEMP DIRECTORY FIX
# ====================================
# Explicitly set Tomcat's base directory to avoid /tmp/pdfbox conflict
server.tomcat.basedir=/tmp/tomcat

# ====================================
# FILE UPLOAD - RENDER FREE: 512MB RAM
# ====================================
spring.servlet.multipart.enabled=true

# CRITICAL: Write to disk immediately (not RAM)
spring.servlet.multipart.file-size-threshold=1MB
spring.servlet.multipart.location=/tmp

# Max File Sizes (conservative for Render Free)
spring.servlet.multipart.max-file-size=30MB
spring.servlet.multipart.max-request-size=100MB

# ====================================
# PERFORMANCE TUNING
# ====================================

# Tomcat Thread Pool (reduced for Render)
server.tomcat.threads.max=20
server.tomcat.threads.min-spare=2

# Connection Timeout (prevents hanging requests)
server.tomcat.connection-timeout=60s

# Max HTTP Header Size (NEW syntax for Spring Boot 3.x)
server.max-http-request-header-size=8KB

# ====================================
# LOGGING (less I/O on Render)
# ====================================
logging.level.root=WARN
logging.level.com.pdfmerger=INFO
logging.level.org.springframework.web=WARN

# Console logging only (Render captures stdout)
logging.pattern.console=%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n

# ====================================
# ACTUATOR (Health Check for Render)
# ====================================
management.endpoints.web.exposure.include=health
management.endpoint.health.show-details=never
management.health.defaults.enabled=false

# ====================================
# APPLICATION
# ====================================
spring.application.name=PDF Merger Web

# Render deployment info
app.environment=production
app.platform=render